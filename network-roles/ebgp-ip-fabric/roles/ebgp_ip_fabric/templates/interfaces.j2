#jinja2:lstrip_blocks: True
interfaces {
   em1 {
       unit 0 {
           description "*** to pfe ***"
           family inet {
               address 169.254.0.2/24;
           }
       }
   }
{% for intf in core_interfaces %}
    {{ intf.int }} {
{% if intf.desc is defined %}
        description "{{ intf.desc }}";
{% endif %}
{% if intf.mac is defined %}
        mac {{ intf.mac }};
{% endif %}
{% if intf.ip is defined %}
        unit 0 {
            family inet {
                address {{ intf.ip }}/{{ intf.mask }};
            }
        }
{% endif %}
    }
{% endfor %}

    {{ management_interface.int }} {
        unit 0 {
            description "*** management ***";
            family inet {
{% if management_interface.ip is defined %}
                address {{ management_interface.ip }}/{{ management_interface.mask }};
{% else %}
                dhcp;
{% endif %}
            }
        }
    }

    lo0 {
        unit 0 {
            description "*** loopback ***";
            family inet {
                address {{ loopback_ip }}/32;
            }
        }
    }
}
